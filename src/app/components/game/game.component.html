@if (!(gameState.gameId && gameState.players && gameState.players.length)) {
  <div class="loading">Loading Game</div>
} @else {
  <div class="game-header">
    <h2 class="now-playing">Now playing: {{ getActivePlayerName() }}</h2>
    <!--<span>Game ID: {{ gameId }}</span>-->
    <span></span>
    <button mat-button (click)="goHome()" class="home-button">Back to Home</button>
  </div>

  <div class="players">
    <mat-chip-set>
      @for (player of gameState.players; track player.uid; let i = $index) {
        <mat-chip
          [class.current-player]="i === gameState.currentPlayerIndex"
          [class.enlarged]="
          (gameState.gameMode === 'local' && i === gameState.currentPlayerIndex) ||
          (gameState.gameMode === 'remote' && player.uid === myPlayerId)
        "
          [class.eliminated-player]="player.eliminated"
        >
          {{ player.name }} | {{ player.score }}
        </mat-chip>
      }
    </mat-chip-set>

  </div>

  <app-dice-display [dice]="gameState.dice" [rolling]="gameState.rolling" />

  <!--<div class="score-options-display game-messages debug-container">
    <div>dice {{gameState.dice | json}}</div>
    <div>bankedThisTurn {{gameState.bankedThisTurn | json}}</div>
    <div>bankedDice {{gameState.bankedDice | json}}</div>
    <div>scoreOpts {{gameState.scoringOptions | json}}</div>
  </div>-->

  <app-score-options-display [myTurn]="myTurn" />

  <div class="turn-controls">
    <span class="turn-score">Current Turn: {{ gameState.turnScore }}</span>

    <button
      mat-raised-button
      color="primary"
      (click)="rollDice()"
      [disabled]="!myTurn || gameState.rolling || gameState.noScoreMessage || gameState.gameOver || (gameState.hasRolled && gameState.bankedDice.length === 0 && !gameState.allDiceScoredMessage)">
      {{ gameState.hasRolled ? 'Roll Again' : 'Roll' }}
    </button>

    <button
      mat-raised-button
      color="accent"
      (click)="endTurn()"
      [disabled]="!myTurn || gameState.gameOver">
      End Turn
    </button>
  </div>

  <app-banked-dice-display [bankedThisTurn]="gameState.bankedThisTurn" />
}




<pre class="debug-container" [innerHTML]="getDebugData() | prettyjson: [false, 4]"></pre>
